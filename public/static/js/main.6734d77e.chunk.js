(this["webpackJsonpmichaelstore-client"]=this["webpackJsonpmichaelstore-client"]||[]).push([[0],{10:function(e,t,c){},24:function(e,t,c){},30:function(e,t,c){"use strict";c.r(t);var s,n=c(1),r=c.n(n),a=c(14),o=c.n(a),i=(c(24),c(4)),u=c(7),j=Object(n.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){},customerIsLoggedIn:!1,customerId:null,customerToken:null,customerLogin:function(){},customerLogout:function(){}}),l=c(3),b=(c(10),c(0)),d=function(){var e=Object(n.useContext)(j);return Object(b.jsx)("div",{className:"logout",children:Object(b.jsx)("label",{onClick:e.logout,children:"logout"})})},m=c(2),O=c.n(m),p=c(5),x=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(),a=Object(l.a)(r,2),o=a[0],i=a[1],u=Object(n.useRef)([]),j=Object(n.useCallback)(function(){var e=Object(p.a)(O.a.mark((function e(t){var c,n,r,a,o,j,l=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>1&&void 0!==l[1]?l[1]:"GET",n=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},s(!0),a=new AbortController,u.current.push(a),e.prev=6,e.next=9,fetch(t,{method:c,body:n,headers:r,signal:a.signal});case 9:return o=e.sent,e.next=12,o.json();case 12:if(j=e.sent,u.current=u.current.filter((function(e){return e!==a})),o.ok){e.next=16;break}throw new Error(j.message);case 16:return s(!1),e.abrupt("return",j);case 20:throw e.prev=20,e.t0=e.catch(6),i(e.t0.message),s(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:c,error:o,sendRequest:j,clearError:function(){i(null)}}},h=Object(n.createContext)({deleteModal:void 0}),f=c(6),g=c(32),v=function(e){var t=Object(b.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(b.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(b.jsx)("h2",{children:e.header})}),Object(b.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(b.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(b.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return o.a.createPortal(t,document.getElementById("modal-hook"))},k=function(e){return Object(b.jsx)(g.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(b.jsx)(v,Object(f.a)({},e))})},w=function(e){return Object(b.jsx)(k,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(b.jsx)("button",{onClick:e.onClear,children:" okay "}),children:Object(b.jsx)("p",{children:e.error})})},I=function(e){var t=Object(i.f)(),c=x(),s=(c.isLoading,c.error),r=c.sendRequest,a=c.clearError,o=(Object(n.useContext)(h),Object(n.useContext)(j)),u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],f=d[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),k=v[0],I=v[1];Object(n.useEffect)((function(){e.description.length>=45&&I(!0)}),[e.description]);var N=function(){var c=Object(p.a)(O.a.mark((function c(){return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,r("".concat("https://rossbuyz.herokuapp.com/api","/admin/deleteConsumerItem/").concat(e._id),"DELETE",null,{Authorization:"Bearer "+o.token});case 3:window.location.reload(),t("/consumerGoods"),c.next=9;break;case 7:c.prev=7,c.t0=c.catch(0);case 9:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(){return c.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"consumerGoods--card",children:[Object(b.jsx)(w,{error:s,onClear:a}),Object(b.jsx)("img",{className:"consumerGoods--card-img",src:"https://s3.us-east-1.amazonaws.com/michaelrossbucket/".concat(e.bucketPhotoId),alt:e.description}),Object(b.jsxs)("div",{className:"consumerGoods--card-text",children:[Object(b.jsx)("p",{children:e.name}),!k&&e.description.substring(0,45),k&&Object(b.jsxs)("p",{children:[e.description.substring(0,45)," ..."]}),Object(b.jsxs)("p",{children:["$",e.price]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"consumerGoods--card-adminText-button",onClick:S,children:"delete"}),m&&Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"are you sure you would like to delete this?"}),Object(b.jsx)("div",{onClick:N,children:"yes"}),Object(b.jsx)("div",{onClick:y,children:"no"})]})]})]})},N=function(e){return Object(b.jsx)("div",{className:"consumerGoods",children:e.items&&e.items.map((function(e){return Object(b.jsx)(I,{_id:e._id,name:e.name,description:e.description,price:e.price,bucketPhotoId:e.bucketPhotoId},e._id)}))})},S=function(){var e=x(),t=(e.isLoading,e.error,e.sendRequest),c=(e.clearError,Object(n.useContext)(h)),s=Object(n.useState)(),r=Object(l.a)(s,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(O.a.mark((function e(){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://rossbuyz.herokuapp.com/api","/admin/getConsumerItems"));case 3:c=e.sent,o(c.findConsumerItems),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,c.context]),Object(b.jsx)("div",{className:"consumerGoods-block",children:a&&Object(b.jsx)(N,{items:a})})},y=function(){return Object(b.jsx)("div",{})},C=function(e){var t=x(),c=(t.isLoading,t.error),s=t.sendRequest,r=t.clearError,a=Object(i.f)(),o=Object(n.useContext)(j),u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=d[0],h=d[1];Object(n.useEffect)((function(){e.description.length>=45&&h(!0)}),[e.description]);var f=function(){var t=Object(p.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://rossbuyz.herokuapp.com/api","/admin/deleteBulk/").concat(e._id),"DELETE",null,{Authorization:"Bearer "+o.token});case 3:window.location.reload(),a("/consumerGoods"),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),g=Object(n.useState)(!1),v=Object(l.a)(g,2),k=v[0],I=v[1],N=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"consumerGoods--card",children:[Object(b.jsx)(w,{error:c,onClear:r}),Object(b.jsx)("img",{className:"consumerGoods--card-img",src:"https://s3.us-east-1.amazonaws.com/michaelrossbucket/".concat(e.bucketPhotoId),alt:e.description}),Object(b.jsxs)("div",{className:"consumerGoods--card-text",children:[Object(b.jsx)("p",{children:e.name}),!m&&e.description.substring(0,45),m&&Object(b.jsxs)("p",{children:[e.description.substring(0,45)," ..."]}),Object(b.jsxs)("p",{children:["$",e.price]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"consumerGoods--card-adminText-button",onClick:N,children:"delete"}),k&&Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"are you sure you would like to delete this?"}),Object(b.jsx)("div",{onClick:f,children:"yes"}),Object(b.jsx)("div",{onClick:S,children:"no"})]})]})]})},L=function(e){return Object(b.jsx)("div",{className:"consumerGoods",children:e.items&&e.items.map((function(e){return Object(b.jsx)(C,{_id:e._id,name:e.name,description:e.description,price:e.price,bucketPhotoId:e.bucketPhotoId},e._id)}))})},E=function(){var e=x(),t=(e.isLoading,e.error,e.sendRequest),c=(e.clearError,Object(n.useState)()),s=Object(l.a)(c,2),r=s[0],a=s[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(O.a.mark((function e(){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat("https://rossbuyz.herokuapp.com/api","/admin/getBulk"));case 3:c=e.sent,a(c.findBulk),console.log(c.findBulk),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(b.jsx)("div",{className:"consumerGoods-block",children:r&&Object(b.jsx)(L,{items:r})})},T=function(){return Object(b.jsx)("div",{})},D=function(e){return Object(b.jsx)("div",{children:e.items&&e.items.map((function(e){e._id}))})},G=c(13),z=function(){var e=Object(n.useContext)(j),t=x(),c=(t.isLoading,t.error),s=t.sendRequest,r=t.clearError,a=Object(G.a)(),o=a.register,i=a.handleSubmit,u=function(){var t=Object(p.a)(O.a.mark((function t(c){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://rossbuyz.herokuapp.com/api","/customer/login"),"POST",JSON.stringify({email:c.email,password:c.password}),{"Content-Type":"application/json"});case 3:n=t.sent,e.customerLogin(n.customerId,n.customerToken),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)(w,{error:c,onClear:r}),Object(b.jsxs)("form",{onSubmit:i(u),children:[Object(b.jsx)("input",Object(f.a)({},o("email"))),Object(b.jsx)("input",Object(f.a)({},o("password"))),Object(b.jsx)("button",{children:"login"})]})]})},_=function(){return Object(b.jsx)("div",{})},M=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),c=t[0],s=t[1],r=function(){!0===c?s(!1):!1===c&&s(!0)};return Object(b.jsxs)("div",{className:"welcome",children:[Object(b.jsxs)("div",{className:"welcome--intro",children:[Object(b.jsx)("h1",{children:"Welcome!"}),Object(b.jsx)("p",{children:" Here at example.com we value your patronage. Login to save card details, edit delivery details, and chat about incoming orders. Thanks for shopping with us!"})]}),c&&Object(b.jsxs)("div",{className:"welcome--welcome",children:[Object(b.jsx)(z,{}),Object(b.jsxs)("p",{className:"welcome--welcome--text",children:["did you mean ",Object(b.jsx)("div",{onClick:r,children:"signup?"})]})]}),!c&&Object(b.jsxs)("div",{className:"welcome--welcome",children:[Object(b.jsx)(_,{}),Object(b.jsxs)("p",{className:"welcome--welcome--text",children:["did you mean ",Object(b.jsx)("div",{onClick:r,children:"login?"})]})]})]})},P=c.p+"static/media/opaque_spinner.95c33229.gif",B=function(e){return Object(b.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(b.jsx)("img",{src:P,alt:"spinner"})})},R=(c(29),function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(),a=Object(l.a)(r,2),o=a[0],i=a[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),m=(d[0],d[1]),h=Object(n.useState)(!0),g=Object(l.a)(h,2),v=g[0],k=g[1];Object(n.useRef)();Object(n.useEffect)((function(){if(c){var e=new FileReader;e.onload=function(){i(e.result)},e.readAsDataURL(c)}}),[c]);var I=function(e){var t;e.target.files||1===e.target.files.length?(t=e.target.files[0],s(t),m(!0)):m(!1)},N=Object(n.useContext)(j),S=Object(G.a)({name:"",price:0,description:"",bulkName:"",bulkDescription:"",bulkPrice:0,image:null,bulkImage:null}),y=S.register,C=S.handleSubmit,L=S.reset,E=S.formState.isSubmitSuccessful;Object(n.useEffect)((function(){E&&L({name:"",price:0,description:"",bulkName:"",bulkDescription:"",bulkPrice:0}),i(null)}),[L,E]);var T=x(),D=T.isLoading,z=T.error,_=T.sendRequest,M=T.clearError,P=Object(n.useState)(),R=Object(l.a)(P,2),A=(R[0],R[1],function(){var e=Object(p.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.name),console.log(t),e.prev=2,(c=new FormData).append("bucketPhotoId",t.image[0]),c.append("name",t.name),c.append("description",t.description),c.append("price",t.price),e.next=10,_("".concat("https://rossbuyz.herokuapp.com/api","/admin/createConsumerItem"),"POST",c,{Authorization:"Bearer "+N.token});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()),q=function(){var e=Object(p.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(c=new FormData).append("bucketPhotoId",t.bulkImage[0]),c.append("name",t.bulkName),c.append("description",t.bulkDescription),c.append("price",t.bulkPrice),e.next=8,_("".concat("https://rossbuyz.herokuapp.com/api","/admin/createBulkItem"),"POST",c,{Authorization:"Bearer "+N.token});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){k(!0!==v)};return Object(b.jsx)("div",{className:"addItem",children:Object(b.jsxs)("div",{className:"addItem-block",children:[Object(b.jsx)(w,{error:z,onClear:M}),D&&Object(b.jsx)(B,{asOverlay:!0}),v&&Object(b.jsxs)("div",{className:"addItem-box",children:[Object(b.jsx)("div",{className:"textsize",onClick:J,children:"\ud83d\udd01"}),Object(b.jsx)("div",{className:"addItem-title",children:Object(b.jsx)("h2",{children:"consumer good"})}),Object(b.jsxs)("form",{className:"addItem-form",onSubmit:C(A),children:[Object(b.jsxs)("div",{className:"addItem-inputs",children:[Object(b.jsx)("input",Object(f.a)(Object(f.a)({},y("image")),{},{type:"file",accept:".jpg,.png,.jpeg",onChange:I})),Object(b.jsx)("div",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"product"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",Object(f.a)({},y("name"))),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"description"}),Object(b.jsx)("br",{}),Object(b.jsx)("textarea",Object(f.a)({},y("description"))),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"price"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",Object(f.a)(Object(f.a)({},y("price")),{},{type:"number"})),Object(b.jsx)("br",{}),Object(b.jsx)("button",{children:"submit"})]}),o&&Object(b.jsx)("img",{className:"image-upload__preview",src:o,alt:"preview"})]})]}),!v&&Object(b.jsxs)("div",{className:"addItem-box",children:[Object(b.jsx)("div",{className:"textsize",onClick:J,children:"\ud83d\udd01"}),Object(b.jsx)("div",{className:"addItem-title",children:Object(b.jsx)("h2",{children:"bulk"})}),Object(b.jsxs)("form",{className:"addItem-form",onSubmit:C(q),children:[Object(b.jsxs)("div",{className:"addItem-inputs",children:[Object(b.jsx)("input",Object(f.a)(Object(f.a)({},y("bulkImage")),{},{type:"file",accept:".jpg,.png,.jpeg",onChange:I})),Object(b.jsx)("div",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"product"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",Object(f.a)({},y("bulkName"))),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"description"}),Object(b.jsx)("br",{}),Object(b.jsx)("textarea",Object(f.a)({},y("bulkDescription"))),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"price"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",Object(f.a)(Object(f.a)({},y("bulkPrice")),{},{type:"number"})),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){return L()},children:"submit"})]}),o&&Object(b.jsx)("img",{className:"image-upload__preview",src:o,alt:"preview"})]})]})]})})}),A=function(){return Object(b.jsx)("div",{})},q=function(){var e=Object(n.useContext)(j);return Object(b.jsxs)("div",{className:"navbar",children:[Object(b.jsxs)("div",{className:"navbar--left",children:[!e.isLoggedIn&&!e.customerIsLoggedIn&&Object(b.jsx)(u.b,{to:"/",children:"about us"}),e.isLoggedIn&&Object(b.jsx)("div",{children:Object(b.jsx)(u.b,{className:"nav--left-aboutUs",to:"/",children:"about us"})})]}),Object(b.jsxs)("div",{className:"navbar--right",children:[Object(b.jsx)(u.b,{className:"navbar--right-bulk",to:"/bulkItems",children:"bulk"}),Object(b.jsx)(u.b,{className:"navbar--right-retail",to:"/consumerGoods",children:"retail"}),!e.isLoggedIn&&!e.customerIsLoggedIn&&Object(b.jsx)(u.b,{className:"navbar--right-login",to:"/welcome",children:"login"}),e.customerIsLoggedIn&&Object(b.jsx)(u.b,{className:"navbar--right-login",to:"/details",children:"details"}),e.customerIsLoggedIn&&Object(b.jsx)(u.b,{className:"navbar--right-login",to:"/yourMessages",children:"inbox"}),e.isLoggedIn&&Object(b.jsx)(u.b,{className:"navbar--right-login",to:"/addItem",children:"add"}),e.isLoggedIn&&Object(b.jsx)(u.b,{className:"navbar--right-login",to:"/messages",children:"inbox"})]})]})},J=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(q,{}),e.children]})},F=function(){var e=Object(n.useContext)(j),t=x(),c=(t.isLoading,t.error),s=t.sendRequest,r=t.clearError,a=Object(G.a)(),o=a.register,i=a.handleSubmit,u=function(){var t=Object(p.a)(O.a.mark((function t(c){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://rossbuyz.herokuapp.com/api","/admin/login"),"POST",JSON.stringify({username:c.username,password:c.password}),{"Content-Type":"application/json"});case 3:n=t.sent,e.login(n.userId,n.token),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"michaelLogin",children:Object(b.jsxs)("div",{className:"michaelLogin-background",children:[Object(b.jsx)(w,{error:c,onClear:r}),Object(b.jsx)("form",{onSubmit:i(u),children:Object(b.jsxs)("div",{className:"michaelLogin-input-top",children:[Object(b.jsx)("label",{className:"michaelLogin-input",children:"\ud83d\ude01"}),Object(b.jsx)("label",{className:"michaelLogin-input",children:"username"}),Object(b.jsx)("input",Object(f.a)({className:"michaelLogin-input"},o("username"))),Object(b.jsx)("label",{className:"michaelLogin-input",children:"password"}),Object(b.jsx)("input",Object(f.a)(Object(f.a)({className:"michaelLogin-input"},o("password")),{},{type:"password"})),Object(b.jsx)("button",{children:"login"})]})})]})})},U=function(){var e=Object(n.useContext)(j),t=x(),c=(t.isLoading,t.error,t.sendRequest),s=(t.clearError,Object(n.useState)()),r=Object(l.a)(s,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(O.a.mark((function t(){var s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("".concat("https://rossbuyz.herokuapp.com/api","/admin/getMessages"),"GET",null,{Authorization:"Bearer "+e.token});case 3:s=t.sent,o(s.findMessages),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[c,e.token]),Object(b.jsx)("div",{children:Object(b.jsx)(D,{items:a})})},$=function(e){var t=Object(n.useContext)(j);return console.log(e.sender),console.log(t.customerId),Object(b.jsxs)("div",{className:"customerMessage-aMessage",children:[t.customerId===e.sender&&Object(b.jsx)("div",{className:"ilblock",children:"me:\xa0 "}),!t.customerId===e.sender&&Object(b.jsx)("div",{className:"ilblock",children:"buyz:\xa0 "}),Object(b.jsxs)("div",{className:"ilblock",children:[" ",e.message]})]})},H=function(){var e=Object(n.useContext)(j),t=x(),c=(t.isLoading,t.error),s=t.sendRequest,r=t.clearError,a=Object(G.a)({message:""}),o=a.register,i=a.handleSubmit,u=a.reset,d=a.formState.isSubmitSuccessful;Object(n.useEffect)((function(){d&&u({message:""})}),[u,d]);var m=Object(n.useState)(),h=Object(l.a)(m,2),g=h[0],v=h[1],k=Object(n.useState)(),I=Object(l.a)(k,2),N=I[0],S=I[1],y=Object(n.useRef)(),C=function(){console.log("check"),y.current.scrollIntoView({behavior:"smooth"})};Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("".concat("https://rossbuyz.herokuapp.com/api","/customer/getMessages"),"GET",null,{Authorization:"Bearer "+e.customerToken});case 3:c=t.sent,v(c.findMessageBoard.messages),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t(),S(!1)}),[s,N,e.customerToken]);var L=function(){var t=Object(p.a)(O.a.mark((function t(c){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s("".concat("https://rossbuyz.herokuapp.com/api","/customer/postMessage"),"POST",JSON.stringify({message:c.messages}),{"Content-Type":"application/json",Authorization:"Bearer "+e.customerToken})}catch(n){}S(!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"customerMessage",children:[Object(b.jsx)(w,{error:c,onClear:r}),g&&Object(b.jsx)("div",{className:"customerMessage-messages",children:Object(b.jsxs)("div",{className:"customerMessage-messages-messages",children:[Object(b.jsx)("div",{ref:y}),g.map((function(e){return Object(b.jsx)($,{sender:e.sender,message:e.message},e._id)})).reverse()]})}),Object(b.jsx)("div",{className:"customerMessage-items"}),Object(b.jsx)("div",{className:"customerMessage-form-border",children:Object(b.jsx)("form",{className:"customerMessage-form",onSubmit:i(L),children:Object(b.jsxs)("div",{className:"customerMessage-form-form",children:[Object(b.jsx)("button",{onClick:function(){setTimeout(C,1e3)},className:"customerMessage-form-button",children:"submit"}),Object(b.jsx)("div",{className:"customerMessage-form-textArea",children:Object(b.jsx)("textarea",Object(f.a)(Object(f.a)({},o("messages")),{},{className:"customerMessage-form-textArea-input"}))})]})})})]})},V=function(){var e=Object(n.useContext)(j);return Object(b.jsx)("div",{children:Object(b.jsx)("div",{onClick:e.customerLogout,children:" logout"})})},W=function(){var e,t=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(),o=Object(l.a)(a,2),i=o[0],u=o[1],j=Object(n.useState)(!1),b=Object(l.a)(j,2),d=b[0],m=b[1],O=Object(n.useCallback)((function(e,t,c){r(t),m(e);var s=c||new Date((new Date).getTime()+864e5);u(s),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:s.toISOString()}))}),[]),p=Object(n.useCallback)((function(){r(null),u(null),m(null),localStorage.removeItem("userData")}),[]);Object(n.useEffect)((function(){if(c&&i){var e=i.getTime()-(new Date).getTime();s=setTimeout(p,e)}else clearTimeout(s)}),[c,p,i]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token,new Date(e.expiration))}),[O]);var x=Object(n.useState)(!1),h=Object(l.a)(x,2),f=h[0],g=h[1],v=Object(n.useState)(),k=Object(l.a)(v,2),w=k[0],I=k[1],N=Object(n.useState)(!1),S=Object(l.a)(N,2),y=S[0],C=S[1],L=Object(n.useCallback)((function(e,t,c){g(t),C(e);var s=c||new Date((new Date).getTime()+864e5);I(s),localStorage.setItem("customerData",JSON.stringify({customerId:e,customerToken:t,expiration:s.toISOString()}))}),[]),E=Object(n.useCallback)((function(){g(null),I(null),C(null),localStorage.removeItem("customerData")}),[]);return Object(n.useEffect)((function(){if(f&&w){var e=w.getTime()-(new Date).getTime();s=setTimeout(E,e)}else clearTimeout(s)}),[f,E,w]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("customerData"));e&&e.customerToken&&new Date(e.expiration)>new Date&&L(e.customerId,e.customerToken,new Date(e.expiration))}),[L]),{token:c,login:O,logout:p,userId:d,customerToken:f,customerLogin:L,customerLogout:E,customerId:y}}(),c=t.token,r=t.login,a=t.logout,o=t.userId,m=t.customerToken,O=t.customerLogin,p=t.customerLogout,x=t.customerId;return e=c?Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/messages",element:Object(b.jsx)(U,{})}),Object(b.jsx)(i.a,{path:"/messages/:md",element:Object(b.jsx)(A,{})}),Object(b.jsx)(i.a,{path:"/addItem",element:Object(b.jsx)(R,{})}),Object(b.jsx)(i.a,{path:"/",element:Object(b.jsx)(d,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods",element:Object(b.jsx)(S,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods/:cgId",element:Object(b.jsx)(y,{})}),Object(b.jsx)(i.a,{path:"/bulkItems",element:Object(b.jsx)(E,{})}),Object(b.jsx)(i.a,{path:"/bulkItems/:biId",element:Object(b.jsx)(T,{})}),Object(b.jsx)(i.a,{path:"*",element:Object(b.jsx)(d,{})})]}):m?Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/yourMessages",element:Object(b.jsx)(H,{})}),Object(b.jsx)(i.a,{path:"/details",element:Object(b.jsx)(V,{})}),Object(b.jsx)(i.a,{path:"/",element:Object(b.jsx)(d,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods",element:Object(b.jsx)(S,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods/:cgId",element:Object(b.jsx)(y,{})}),Object(b.jsx)(i.a,{path:"/bulkItems",element:Object(b.jsx)(E,{})}),Object(b.jsx)(i.a,{path:"/bulkItems/:biId",element:Object(b.jsx)(T,{})}),Object(b.jsx)(i.a,{path:"*",element:Object(b.jsx)(d,{})})]}):Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/",element:Object(b.jsx)(d,{})}),Object(b.jsx)(i.a,{path:"/michaelross",element:Object(b.jsx)(F,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods",element:Object(b.jsx)(S,{})}),Object(b.jsx)(i.a,{path:"/consumerGoods/:cgId",element:Object(b.jsx)(y,{})}),Object(b.jsx)(i.a,{path:"/bulkItems",element:Object(b.jsx)(E,{})}),Object(b.jsx)(i.a,{path:"/bulkItems/:biId",element:Object(b.jsx)(T,{})}),Object(b.jsx)(i.a,{path:"/welcome",element:Object(b.jsx)(M,{})}),Object(b.jsx)(i.a,{path:"*",element:Object(b.jsx)(d,{})})]}),Object(b.jsx)(j.Provider,{value:{isLoggedIn:!!c,token:c,userId:o,login:r,logout:a,customerIsLoggedIn:!!m,customerToken:m,customerId:x,customerLogin:O,customerLogout:p},children:Object(b.jsx)(u.a,{children:Object(b.jsx)(J,{children:e})})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,33)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root")),K()}},[[30,1,2]]]);
//# sourceMappingURL=main.6734d77e.chunk.js.map